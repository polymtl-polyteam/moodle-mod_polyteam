define("mod_polyteam/polyteam",["exports","https://cdn.jsdelivr.net/npm/d3@7"],(function(_exports,d3){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.displayTeams=void 0,d3=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(d3);_exports.displayTeams=()=>{const generatedTeamsDiv=document.getElementById("generatedteams");let cognitiveModes=["EF","EN","ES","ET","IF","IN","IS","IT"];const generatedTeamsRaw=JSON.parse(generatedTeamsDiv.dataset.generatedteams),generatedTeams=[cognitiveModes.reduce(((obj,mode)=>(obj[mode]=1/cognitiveModes.length*100,obj)),{}),...generatedTeamsRaw.map((team=>{const counter=team.cognitive_modes_counter,cognitiveModesCount=Object.entries(counter).reduce(((sum,_ref)=>{let[_,modeCount]=_ref;return sum+modeCount}),0);return cognitiveModes.reduce(((obj,mode)=>(obj[mode]=counter[mode]/cognitiveModesCount*100,obj)),{})}))],matchingStrategies=["Ideal",...new Set(generatedTeamsRaw.map((team=>team.matching_strategy)))],parentWidth=document.getElementById("polyteamgeneratedteams").getBoundingClientRect().width,margin_top=20,margin_right=50,margin_bottom=50,margin_left=50,width=parentWidth-margin_left-margin_right,height=400-margin_top-margin_bottom;let svg=d3.select("#polyteamgeneratedteams").append("svg").attr("width",width+margin_left+margin_right).attr("height",height+margin_top+margin_bottom).append("g").attr("transform","translate("+margin_left+","+margin_top+")");const labels=generatedTeams.map(((_,index)=>0===index?"Ideal":"".concat(index))),markersColors=d3.scaleOrdinal().domain(matchingStrategies).range(["burlywood","black","chocolate"]);var legend=svg.selectAll(".legend").data(matchingStrategies).enter().append("g").attr("class","legend");legend.append("circle").attr("cx",20).attr("cy",10).attr("r",6).style("fill",(function(d){return markersColors(d)})),legend.append("text").attr("x",40).attr("y",10).attr("dy",".35em").text((function(d){return d})).style("fill",(function(d){return markersColors(d)}));var legendItems=document.querySelectorAll(".legend"),totalWidth=0;legendItems.forEach((function(item){totalWidth+=item.getBBox().width}));var startX=(width-totalWidth-40*(matchingStrategies.length-1))/2,previousWidth=0;legend.attr("transform",(function(d,i){return previousWidth+=0===i?0:legendItems[i-1].getBBox().width,"translate("+(startX+previousWidth+40*i)+", ".concat(-margin_top,")")}));let x=d3.scaleBand().domain(labels).range([0,width]).padding([.2]);svg.append("g").attr("transform","translate(0,"+height+")").call(d3.axisBottom(x).tickSizeOuter(0)),svg.append("text").attr("text-anchor","end").attr("x",(width+margin_left+margin_right)/2).attr("y",height+.75*margin_bottom).attr("font-size","medium").text("Teams");let yLeft=d3.scaleLinear().domain([0,100]).range([height,0]);svg.append("g").call(d3.axisLeft(yLeft)),svg.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",.75*-margin_left).attr("x",-height/2).attr("font-size","medium").text("Cognitive variances (%)");const cognitiveVariances=[0,...generatedTeamsRaw.map((t=>t.cognitive_variance))];let yRight=d3.scaleLinear().domain([0,Math.max(12,Math.max(...cognitiveVariances)+1)]).range([height,0]);svg.append("g").attr("transform","translate(".concat(width,", 0)")).call(d3.axisRight(yRight)),svg.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("y",width+.75*margin_left).attr("x",-height/2).attr("font-size","medium").text("Standard deviation (markers)");let color=d3.scaleOrdinal().domain(cognitiveModes).range(["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F"]),stackedData=d3.stack().keys(cognitiveModes)(generatedTeams);svg.append("g").selectAll("g").data(stackedData).enter().append("g").attr("fill",(function(d){return color(d.key)})).selectAll("rect").data((function(d){return d})).enter().append("rect").attr("x",(function(d,i){return x(labels[i])})).attr("y",(function(d){return yLeft(d[1])})).attr("height",(function(d){return yLeft(d[0])-yLeft(d[1])})).attr("width",x.bandwidth()),svg.append("g").selectAll("g").data(cognitiveModes).enter().append("text").text((function(d){return d})).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("alignment-baseline","middle").attr("x",(function(){return x(labels[0])+x.bandwidth()/2})).attr("y",(function(_,i){return(yLeft(stackedData[i][0][0])+yLeft(stackedData[i][0][1]))/2})).attr("font-weight","bold").attr("font-size","".concat(Math.min(x.bandwidth()/2,35),"px")).attr("fill","white"),svg.append("g").selectAll("dot").data(cognitiveVariances).enter().append("circle").attr("cx",(function(_,i){return x(labels[i])+x.bandwidth()/2})).attr("cy",(function(d){return yRight(d)})).attr("r",Math.min(5,.45*x.bandwidth())).style("fill",(function(_,i){return markersColors(0===i?"Ideal":generatedTeamsRaw[i-1].matching_strategy)}))}}));

//# sourceMappingURL=polyteam.min.js.map